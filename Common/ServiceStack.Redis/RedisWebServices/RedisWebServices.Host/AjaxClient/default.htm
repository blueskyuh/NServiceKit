<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8">
<title>AjaxStack Examples Demo</title>
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" href="css/tree.css">

<link rel="stylesheet" href="css/tab.css">
<link rel="stylesheet" href="css/toolbar.css">
<link rel="stylesheet" href="css/tabbar.css">

<link rel="stylesheet" href="css/default.css">

<link rel="stylesheet" href="css/button.css">
<link rel="stylesheet" href="css/custombutton.css">
<link rel="stylesheet" href="css/flatbutton.css">
<link rel="stylesheet" href="css/linkbutton.css">

<link rel="stylesheet" href="css/autocomplete.css">


<script src="js/closure-library/closure/goog/base.js"></script>
<script type="text/javascript" src="js/jLinq-2.2.1.js"></script>
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>

<script type="text/javascript" src="js/wcf-ostynscormtime.js"></script>
<script type="text/javascript" src="js/AjaxStack.snippets.js"></script>
<script type="text/javascript" src="js/RedisClient.js"></script>
<script type="text/javascript" src="js/JSV.js"></script>

<script type="text/javascript">
    goog.require('goog.debug.DivConsole');
    goog.require('goog.debug.FancyWindow');
    goog.require('goog.debug.Trace');

    goog.require('goog.events');
    goog.require('goog.dom');
    goog.require('goog.dom.ViewportSizeMonitor');
    goog.require('goog.History');
    goog.require('goog.ui.tree.TreeControl');
    goog.require('goog.ui.TabBar');
    goog.require('goog.ui.Component');
    goog.require('goog.ui.SplitPane');
    goog.require('goog.ui.SplitPane.Orientation');

    goog.require('goog.ui.Toolbar');
    goog.require('goog.ui.ToolbarRenderer');
    goog.require('goog.ui.ToolbarButton');
    goog.require('goog.ui.ToolbarMenuButton');
    goog.require('goog.ui.ToolbarSelect');
    goog.require('goog.ui.ToolbarSeparator');
    goog.require('goog.ui.ToolbarToggleButton');

    goog.require('goog.ui.Button');
    goog.require('goog.ui.ButtonRenderer');
    goog.require('goog.ui.CustomButton');
    goog.require('goog.ui.CustomButtonRenderer');
    goog.require('goog.ui.FlatButtonRenderer');
    goog.require('goog.ui.LinkButtonRenderer');
    goog.require('goog.ui.ToggleButton');
    goog.require('goog.ui.decorate');

    goog.require('goog.ui.AutoComplete.Basic');
    
</script>

<script type="text/javascript" src="js/redisadmin/App.js"></script>
<script type="text/javascript" src="js/redisadmin/ViewController.js"></script>
<script type="text/javascript" src="js/redisadmin/EditorViewController.js"></script>
<script type="text/javascript" src="js/redisadmin/AdminViewController.js"></script>

<script type="text/javascript">
    var tree, app, initPath;

    $(function() {

        var enableLogging = true;
        if (enableLogging)
        {
            var divConsole = new goog.debug.DivConsole(goog.dom.getElement('divconsole'));
            divConsole.setCapturing(true);

            $("#lnkViewLog").toggle(
            function(){
                $(this).addClass("min");
                $("#divconsole").hide();
            }, function(){
                $(this).removeClass("min");
                $("#divconsole").show();
            });

            goog.style.showElement(goog.dom.getElement('log'), true);            
        }

        app = redisadmin.App.getInstance();

        $("#txtQuery").keypress(function(event){
            var keyCode = (event.keyCode ? event.keyCode : event.which);
            var enterKey = '13';
            if(keyCode == enterKey){
                $("#btnSearch").click();
            }
        });
        
        $("#btnSearch").click(function() {
            app.searchInMainNav($("#txtQuery").val());
        });

        $("#txtQuery").val("urn:*");
        $("#btnSearch").click();

        if (initPath)
        {
            app.loadPath(initPath);
        }

    });
</script>

</head>

<body>

<div id="body">
    <div id="log" style="display:none">
        <h3><a id="lnkViewLog"></a>Event Logger</h3>
        <div id="divconsole"></div>
    </div>

    <div id="header">
        <div id="logo">
            <a href="default.htm"><img src="img/redis-small.png" alt="Redis Admin UI"/></a>

            <h1>Admin UI</h1>
        </div>
        <div id="searchbox">
            <input id="txtQuery" type="text" value="urn:*" />
            <button id="btnSearch">Search Keys</button>
            <!--<button id="btnPopulate">Populate with Data</button>-->
        </div>
    </div>

    <div id="container" class='goog-splitpane'>
        <div class="goog-splitpane-first-container">
            <div id="mainNav"></div>
        </div>
        <div id="content" class='goog-splitpane-second-container'>
            <div id="tab" class="goog-tab-bar goog-tab-bar-top">
                <div class="goog-tab goog-tab-selected">Admin</div>
                <div class="goog-tab goog-tab-selected">Editor</div>
                <!--<div id="mainNav-tab" class="goog-tab">Main Tab<img class="close-tab" src="images/close_box.gif" title="close tab" /></div>-->
            </div>
            <!-- Use goog-tab-bar-clear to separate the tabs from the content. -->
            <div class="goog-tab-bar-clear"></div>
            <div id="tab_content">
                <h3>This is the Start Page.</h3>
                <p>
                    No Doubt in time it will be filled with interesting stuff on how to use this app.
                </p>
                <h4>Action tests</h4>
                <ul>
                    <li><a href="#editor">#editor</a></li>
                    <li><a href="#editor/A">#editor/A</a></li>
                    <li><a href="#editor/B/1">#editor/B/1</a></li>
                    <li><a href="#editor/urn:customer">#editor/urn:customer</a></li>
                    <li><a href="#editor/urn:customer/urn:customer:ALFKI">#editor/urn:customer/urn:customer:ALFKI</a></li>
                </ul>
            </div>
        </div>
        <div class='goog-splitpane-handle'></div>
    </div>

    <div id="footer">
        <strong>powered by: </strong>
        <a href="http://code.google.com/p/servicestack/">servicestack.net</a> |
        <a href="http://code.google.com/p/closure-library/">closure library</a> 
    </div>
</div>

<script type="text/javascript">
    //After some trial & error this is only good place to init 'goog.History()'
    var h = new goog.History();
    goog.events.listen(h, goog.History.EventType.NAVIGATE, function(e){
        if (!app) {
            initPath = e.token;
            return;
        }
        app.loadPath(e.token);
    });
    h.setEnabled(true);
</script>

</body>
</html>
